<div class="form-container">
  <div class="card">
    <div class="card-header">
      <h4>Personal Details</h4>
    </div>
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <ng-container *ngFor="let control of formConfig | keyvalue">
          <ng-container [ngSwitch]="control.value.controlType">
            <div class="form-field" *ngSwitchCase="'input'">
              <label [for]="control.value.name">{{
                control.value.label
              }}</label>
              <input
                [id]="control.value.name"
                [type]="control.value.type"
                [formControlName]="control.value.name"
              />
            </div>

            <div class="form-field" *ngSwitchCase="'select'">
              <label [for]="control.value.name">{{
                control.value.label
              }}</label>
              <select [formControlName]="control.value.name">
                <option
                  *ngFor="let option of control.value.options"
                  [value]="option.value"
                >
                  {{ option.label }}
                </option>
              </select>
            </div>

            <div
              class="form-field form-field--checkbox"
              *ngSwitchCase="'checkbox'"
            >
              <input
                type="checkbox"
                [id]="control.value.name"
                [formControlName]="control.value.name"
              />
              <label [for]="control.value.name">{{
                control.value.label
              }}</label>
            </div>
          </ng-container>
          <ng-container
            *ngIf="
              form.get(control.value.name)?.touched &&
              form.get(control.value.name)?.hasError('required')
            "
          >
            <p class="input-error" >{{ control.value.label }} is required</p>
          </ng-container>
          <ng-container
            *ngIf="
              form.get(control.value.name)?.touched &&
              form.get(control.value.name)?.hasError('email')
            "
          >
            <p class="input-error">{{ control.value.label }} should be valid</p>
          </ng-container>
        </ng-container>
        <button type="submit" [disabled]="!form.valid">Submit</button>
      </form>
    </div>
  </div>
</div>
